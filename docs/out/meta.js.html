<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: meta.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: meta.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * @namespace meta
 */
var meta = {};

/**
 * Reduces a context to a black mask of pixels whose alpha channel is above a given
 * threshold. Does not modify the existing image data, instead returning a new image data.
 * @memberof meta
 * @method meta.threshold
 * @param {CanvasRenderingContext2D} ctx Canvas context to read from
 * @param {number} alpha (0 - 1) Alpha threshold. Values above this threshold will be
 * rendered black and values below this threshold will be transparent.
 * @return {ImageData} New image data containing the thresholded image
 */
meta.threshold = function (ctx, alpha) {
	alpha *= 255;
	var width = ctx.canvas.width;
	var height = ctx.canvas.height;
	var source = ctx.getImageData(0, 0, width, height);
	var dest = ctx.createImageData(width, height);
	for (var i = 3, l = source.data.length; i &lt; l; i += 4) {
		dest.data[i] = source.data[i] > alpha ? 255 : 0;
	}
	return dest;
};

/**
 * Draw a radial gradient at a given point on a given canvas.
 * @memberof meta
 * @method meta.drawRadialGradient
 * @param {CanvasRenderingContext2D} ctx Canvas context to draw on
 * @param {number} x X co-ordinate to center the gradient on
 * @param {number} y Y co-ordinate to center the gradient on
 * @param {number} r1 Radius of the inner circle of the gradient
 * @param {number} r2 Radius of the outer circle of the gradient
 */
meta.drawRadialGradient = function (ctx, x, y, r1, r2) {
	var grad = ctx.createRadialGradient(x, y, r1, x, y, r2);
	grad.addColorStop(0, 'rgba(0, 0, 0, 1)');
	grad.addColorStop(1, 'rgba(0, 0, 0, 0)');
	
	ctx.save();
	ctx.beginPath();
	ctx.arc(x, y, r2, 0, Math.PI * 2, true);
	ctx.closePath();
 	ctx.fillStyle = grad;
	ctx.fill();
	ctx.restore();
};

/**
 * Simple struct which stores a set of ({@link meta.MetaBall#x|x},
 * {@link meta.MetaBall#y|y}) co-ordinates.
 * @memberof meta
 * @constructor
 * @struct
 */
meta.MetaBall = function () { };

meta.MetaBall.prototype = {

	/**
	 * X co-ordinate
	 * @public
	 * @defaultvalue
	 * @type {number}
	 */
	x: 0,

	/**
	 * Y co-ordinate
	 * @public
	 * @defaultvalue
	 * @type {number}
	 */
	y: 0,

	/**
	 * Inner radius of {@link meta.MetaBall|MetaBall}
	 * @public
	 * @defaultvalue
	 * @type {number}
	 */
	r1: 0,

	/**
	 * Outer radius of {@link meta.MetaBall|MetaBall}
	 * @public
	 * @defaultvalue
	 * @type {number}
	 */
	r2: 1,

	/**
	 * Override this function. Return a struct of the form &lt;code>{ x: 0, y: 0 }&lt;/code>.
	 * @public
	 * @abstract
	 * @defaultvalue
	 * @return {Object.&lt;string, number>} A struct with x and y values.
	 */
	position: function () {
		return {
			x: 0,
			y: 0
		}
	},

	/**
	 * Takes a numeric time argument and sets the {@link meta.MetaBall|MetaBall}'s
	 * {@link meta.MetaBall#x|x} and {@link meta.MetaBall#y|y} co-ordinates using its
	 * {@link meta.MetaBall#position} function.
	 * @public
	 * @defaultvalue
	 * @param {number} time Unix time
	 */
	update: function (time) {
		var coords = this.position(time);
		this.x = coords.x;
		this.y = coords.y;
	}
};

/**
 * Draw a {@link meta.MetaBall|MetaBall} to a canvas context.
 * @memberof meta
 * @method meta.drawMetaBall
 * @param {CanvasRenderingContext2D} ctx Canvas context to draw on
 * @param {MetaBall} ball Meta ball to draw
 */
meta.drawMetaBall = function (ctx, ball) {
	meta.drawRadialGradient(ctx, ball.x, ball.y, ball.r1, ball.r2);
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="meta.MetaBall.html">MetaBall</a></li></ul><h3>Namespaces</h3><ul><li><a href="meta.html">meta</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-spirograph.html">spirograph</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ALPHA_THRESHOLD">ALPHA_THRESHOLD</a></li><li><a href="global.html#CANVAS_HEIGHT">CANVAS_HEIGHT</a></li><li><a href="global.html#CANVAS_WIDTH">CANVAS_WIDTH</a></li><li><a href="global.html#METABALL_INNER_RADIUS_MAX">METABALL_INNER_RADIUS_MAX</a></li><li><a href="global.html#METABALL_INNER_RADIUS_MIN">METABALL_INNER_RADIUS_MIN</a></li><li><a href="global.html#METABALL_OUTER_RADIUS_MAX">METABALL_OUTER_RADIUS_MAX</a></li><li><a href="global.html#METABALL_OUTER_RADIUS_MIN">METABALL_OUTER_RADIUS_MIN</a></li><li><a href="global.html#NUM_BALLS">NUM_BALLS</a></li><li><a href="global.html#SCALE_FACTOR">SCALE_FACTOR</a></li><li><a href="global.html#spirograph">spirograph</a></li><li><a href="global.html#SPIROGRAPH_RADIUS">SPIROGRAPH_RADIUS</a></li><li><a href="global.html#TIME_DILATION">TIME_DILATION</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Sat Aug 31 2013 13:39:30 GMT+1000 (EST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
